import { Description } from '@storybook/addon-docs/blocks';

<Meta title='Гайдлайны|Доступность / Формы' />

# Формы

При разработке форм следует убедиться, что все пользователи, включая людей с ограниченными возможностями, смогут воспринимать их и управлять ими.

## Как это сделать?

### 1. Старайтесь использовать нативные элементы управления

Кастомные элементы, в отличие от нативных, не всегда обладают всей встроенной функциональностью и свойствами, поэтому могут быть недоступны для скринридеров.

К сожалению, не всегда есть возможность стилизовать нативные элементы в соответствии с дизайном. В таком случае — используйте нативные элементы в основе кастомных, либо не забывайте реализовывать всю функциональность и правильно использовать ARIA атрибуты.

```html
❌ Плохо
<div class="checkbox checked">Check me</div>

✅ Хорошо
<div
    class="checkbox checked"
    role="checkbox"
    aria-checked="true"
    onClick={clickHandler}
    onKeyDown={keyDownHandler}
>
    Check me
</div>

✅ Еще лучше
<input type="checkbox" id="my-checkbox" />
<label for="my-checkbox">Check me</label>
```

### 2. Подписывайте элементы форм

Все элементы форм должны иметь названия, которые должны быть краткими и отражать назначение поля.
Это можно сделать несколькими способами:
- Обернуть элемент форм в тэг `<label />`
- Использовать тэг `<label />` совместно с атрибутом `for`, содержащим `id` поля
- Использовать для поля атрибут `aria-labelledby`, содержащий `id` элемента с описанием поля
- Использовать для поля атрибут `aria-label`, явно указав название для скринридеров.<br/>Помимо этого следует подписать поле для остальных пользователей.

```html
❌ Плохо
<label>Электронная почта</label>
<input type="text">

✅ Хорошо
<label>
    Электронная почта
    <input type="email" />
</label>

✅ Хорошо
<input type="text" aria-label="Поиск по странам" />
<button>Найти</button>
```

### 3. Используйте правильные типы для полей ввода

HTML5 предоставляет различные типы для полей ввода, например `email, url, number, range, date, или time`.

Но чаще всего, для ввода определенных данных, например номера телефона или карты, даты и пр. используются кастомные компоненты, которые дают более удобный способ ввода.
В этом случае старайтесь сохранять нативное поведение.

**С примерами реализации таких элементов можно ознакомиться [здесь](https://www.w3.org/TR/2019/NOTE-wai-aria-practices-1.1-20190814/examples/).**

```html
❌ Плохо
<label>
    Введите номер телефона
    <input type="text" />
</label>

❌ Не очень
<label>
    Введите номер телефона в формате +7 XXX XX-XX-XX
    <input type="text" />
</label>

✅ Хорошо
<PhoneInput label="Введите номер телефона" title="Российский номер телефона в формате +7 XXX XX-XX-XX" />
```

### 4. Группируйте связанные поля

Группируйте поля с помощью элементов `<fieldset>` и `<legend>`, либо атрибутов `role="group"` и `aria-labelledby`. Такая группировка облегчает работу с формами, содержащими большое число данных.

```html
<fieldset>
  <legend>Контакты</legend>
  <label for="input-mail" id="label-mail">Электронная почта</label>
  <input type="email" id="input-mail" aria-labelledby="label-mail">

  <label for="input-phone" id="label-phone">Телефон</label>
  <input type="email" id="input-phone" aria-labelledby="label-phone">
</fieldset>
```

### 5. Уведомляйте пользователей об ошибках, шагах и успехе

После отправки формы — выводите понятные и краткие уведомления об ошибках и успехе. Так пользователи смогут лучше понять, что произошло после отправки формы.

```html
<form>...</form>
<!-- assertive - сообщение будет прочитано немедленно -->
<!-- polite - сообщение будет озвучено после текущего -->
<div role="alert" aria-live="assertive">
  Ваши настройки не сохранились, попробуйте ещё раз!
</div>
```

```html
<label>
    Адрес:
    <input name="address" type="text" aria-describedby="address-error">
</label>
<div id="address-error">
    Введите корректный адрес
</div>
```

## Дополнительная информация
- **[Описание ARIA ролей и примеры реализаций](https://www.w3.org/TR/2019/NOTE-wai-aria-practices-1.1-20190814/examples/)**
- **[Более подробно о динамическом контенте в ARIA](https://medium.com/web-standards/aria-live-regions-713f6a7813d3)**

