import { Description, Story, Preview } from '@storybook/addon-docs/blocks';
import { Row } from 'storybook/blocks/grid';
import cn from 'classnames';

import { Typography } from '@alfalab/core-components-typography';
import { Radio } from '@alfalab/core-components-radio';
import { Checkbox } from '@alfalab/core-components-checkbox';

import styles from './2.theming.stories.css';

<Meta title='–ü—Ä–∏–Ω—Ü–∏–ø—ã|–¢–µ–º–∏–∑–∞—Ü–∏—è' />

<Story name="–û–ø–∏—Å–∞–Ω–∏–µ" />

## üíÖ –¢–µ–º–∏–∑–∞—Ü–∏—è

–¢–µ–º—ã –¥–ª—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –¥–æ—Å—Ç—É–ø–Ω—ã –≤ –ø–∞–∫–µ—Ç–µ [@alfalab/core-components-themes](https://www.npmjs.com/package/@alfalab/core-components-themes).

–ü–∞–∫–µ—Ç –∏–º–µ–µ—Ç —Å–ª–µ–¥—É—é—â—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É:
```
@alfalab/core-components-themes
‚îú‚îÄ‚îÄ component1
|  ‚îî‚îÄ‚îÄ click.css
|  ‚îî‚îÄ‚îÄ theme2.css
‚îú‚îÄ‚îÄ component2
|  ‚îî‚îÄ‚îÄ click.css
|  ‚îî‚îÄ‚îÄ theme2.css
‚îú‚îÄ‚îÄ mixins
|  ‚îú‚îÄ‚îÄ component1
|  |  ‚îî‚îÄ‚îÄ click.css
|  |  ‚îî‚îÄ‚îÄ theme2.css
|  ‚îú‚îÄ‚îÄ component2
|  |  ‚îî‚îÄ‚îÄ click.css
|  |  ‚îî‚îÄ‚îÄ theme2.css
|  ‚îú‚îÄ‚îÄ click.css
|  ‚îî‚îÄ‚îÄ theme2.css
‚îú‚îÄ‚îÄ click.css
‚îú‚îÄ‚îÄ theme2.css
‚îî‚îÄ‚îÄ package.json
```

- –í –∫–æ—Ä–Ω–µ –ø–∞–∫–µ—Ç–∞ –ª–µ–∂–∞—Ç css-—Ç–µ–º—ã (*click.css –∏ –¥—Ä.*), –∫–æ—Ç–æ—Ä—ã–µ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è—é—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤.
- –í –ø–∞–ø–∫–∞—Ö –Ω–∞—Ö–æ–¥—è—Ç—Å—è —Ç–µ–º—ã, —Ä–∞–∑–±–∏—Ç—ã–µ –ø–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º.
- –ü–æ–º–∏–º–æ pure-css —Ç–µ–º, –¥–æ—Å—Ç—É–ø–Ω—ã –º–∏–∫—Å–∏–Ω—ã –∏–∑ –ø–∞–ø–∫–∏ `mixins`.

–ü—Ä–∏–º–µ—Ä pure-css —Ç–µ–º—ã:

```css
/* @alfalab/core-components-themes/click.css */
:root {
    /**
     * === button ===
     */

    --button-ghost-hover-color: var(--color-red-brand);
    --button-ghost-active-color: var(--color-red-dark);
    ...
}
```

–ü—Ä–∏–º–µ—Ä mixin-—Ç–µ–º—ã:

```css
/* @alfalab/core-components-themes/mixins/click.css */
@import './input/click.css';
@import './pure-input/click.css';
@import './button/click.css';

@define-mixin theme-click {
    @mixin input-click;
    @mixin pure-input-click;
    @mixin button-click;
    ...
}
```

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
<br/>

### –ë–∞–∑–æ–≤—ã–π –ø—Ä–∏–º–µ—Ä —Å arui-scripts

```js
// –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–∞–∫–µ—Ç —Å —Ç–µ–º–∞–º–∏
yarn add @alfalab/core-components-themes

// –ü–æ–¥–∫–ª—é—á–∏—Ç–µ –≤ package.json –Ω—É–∂–Ω—É—é —Ç–µ–º—É
"aruiScripts": {
    "—ÅomponentsTheme": "./node_modules/@alfalab/core-components-themes/click.css"
}

// –í—ã –ø—Ä–µ–∫—Ä–∞—Å–Ω—ã üòΩ
```

### –î–µ—Ç–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —Ç–µ–º–∏–∑–∞—Ü–∏–∏

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–µ–º—ã –º–æ–∂–Ω–æ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ —Å–ø–æ—Å–æ–±–∞–º–∏, –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π –∏ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–µ–π —Å–±–æ—Ä–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞:

#### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –Ω–∞—Ç–∏–≤–Ω—ã—Ö css-–ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö

–í —ç—Ç–æ–º —Å–ª—É—á–∞–µ, –≤–∞–º –¥–æ—Å—Ç—É–ø–Ω—ã –≤—Å–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —Ç–µ–º–∏–∑–∞—Ü–∏–∏.

- **pure-css**:

```css
/* –≥–ª–æ–±–∞–ª—å–Ω–æ –ø—Ä–∏–º–µ–Ω—è–µ–º —Ç–µ–º—É –∫–ª–∏–∫–∞ */
@import '~@alfalab/core-components-themes/click.css';

/* –ø—Ä–∏–º–µ–Ω—è–µ–º —Ç–µ–º—É –∫–ª–∏–∫–∞ —Ç–æ–ª—å–∫–æ –¥–ª—è –∏–Ω–ø—É—Ç–∞ */
@import '~@alfalab/core-components-themes/input/click.css';
```

```jsx
import '@alfalab/core-components-themes/click.css';
import '@alfalab/core-components-themes/input/click.css';
```

- **mixins**:

```css
@import '~@alfalab/core-components-themes/mixins/dark.css';

.dark-block {
    /* –ø—Ä–∏–º–µ–Ω—è–µ–º —Ç–µ–º–Ω—É—é —Ç–µ–º—É –∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É –±–ª–æ–∫—É */
    @mixin theme-dark;
}
```

```css
@import '~@alfalab/core-components-themes/mixins/input/dark.css';

.dark-input {
    /* —Ç–µ–º–∏–∑–∏—Ä—É–µ–º –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–π –∏–Ω–ø—É—Ç */
    @mixin input-dark;
}
```

- –î–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ IE11 - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–∞–Ω–Ω—ã–π [–ø–æ–ª–∏—Ñ–∏–ª–ª](https://github.com/nuxodin/ie11CustomProperties)

- –î–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –º–∏–∫—Å–∏–Ω–æ–≤ - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ [postcss-mixins](https://github.com/postcss/postcss-mixins)

- –ï—Å–ª–∏ –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ [arui-scripts](https://github.com/alfa-laboratory/arui-scripts), —Ç–æ –≤–∞–º –Ω—É–∂–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç—å —Ç—Ä–∞–Ω—Å–ø–∞–π–ª–∏–Ω–≥ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö (preserve = true):

```js
// arui-scripts.overrides.js –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞
// https://github.com/alfa-laboratory/arui-scripts#—Ç–æ–Ω–∫–∞—è-–Ω–∞—Å—Ç—Ä–æ–π–∫–∞
const {
    createPostcssConfig, // —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ —Ñ–∞–π–ª–∞ postcss
    postcssPlugins, // —Å–ø–∏—Å–æ–∫ –ø–ª–∞–≥–∏–Ω–æ–≤
    postcssPluginsOptions, // –∫–æ–ª–ª–µ–∫—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π –ø–ª–∞–≥–∏–Ω–æ–≤
} = require('arui-scripts/configs/postcss.config');

module.exports = {
    postcss: () => {
        const newOption = {
            ...postcssPluginsOptions,
            '@alfalab/postcss-custom-properties': {
                ...postcssPluginsOptions['@alfalab/postcss-custom-properties'],
                preserve: true,
            },
        };
        return createPostcssConfig(postcssPlugins, newOption);
    },
};
```

#### –¢—Ä–∞–Ω—Å–ø–∞–π–ª–∏–Ω–≥ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –ø—Ä–∏ —Å–±–æ—Ä–∫–µ

–í —ç—Ç–æ–º —Å–ª—É—á–∞–µ –¥–æ—Å—Ç—É–ø–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ç–æ–ª—å–∫–æ pure-css —Ç–µ–º.

- –ï—Å–ª–∏ –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ [arui-scripts](https://github.com/alfa-laboratory/arui-scripts) - –ø–æ–¥–∫–ª—é—á–∏—Ç–µ –Ω—É–∂–Ω—É—é —Ç–µ–º—É –≤ `package.json`:

  ```json
  "aruiScripts": {
      "—ÅomponentsTheme": "./node_modules/@alfalab/core-components-themes/click.css"
  }
  ```


- –ò–Ω–∞—á–µ, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ [alfa-laboratory/postcss-custom-properties](https://github.com/alfa-laboratory/postcss-custom-properties), —É–∫–∞–∑–∞–≤ –≤ `importFrom` –ø—É—Ç—å –∫ —Ñ–∞–π–ª—É —Å —Ç–µ–º–æ–π.

  ```js
  postcssCustomProperties({
      preserve: true,
      importFrom: './node_modules/@alfalab/core-components-themes/click.css'
  });
  ```

## –ü—Ä–∏–º–µ—Ä—ã

export const css = `.dark {
    --some-component-var: var(--some-new-color);
}`;

export const cssMixin = `@define-mixin theme-dark {
    --some-component-var: var(--some-new-color);
}
.dark {
    @mixin theme-dark;
}`;

<Story name="–ü—Ä–∏–º–µ—Ä—ã">
    <div className={styles.themeExample}>
        <div className={cn(styles.dark, styles.container)}>
            <Typography.Title view="small">Dark block</Typography.Title>
            <br/>
            <Typography.Text tag="p">
                –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π —Å–ø–æ—Å–æ–± —Ç–µ–º–∏–∑–∞—Ü–∏–∏ - –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –Ω—É–∂–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –ø–æ –∫–ª–∞—Å—Å—É:
                <pre className={styles.cssExample}>{css}</pre>
            </Typography.Text>
            <Typography.Text tag="p">
                –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∫–∞–∫ –ø–µ—Ä–µ–∫—Ä–∞—Å–∏—Ç—å –≤—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ, —Ç–∞–∫ –∏ –ø—Ä–∏–º–µ–Ω—è—Ç—å —Ç–µ–º—É —Ç–æ–ª—å–∫–æ –∫ –≤—ã–±—Ä–∞–Ω–Ω–æ–º—É –±–ª–æ–∫—É.
            </Typography.Text>
            <Typography.Text tag="p">
                –î–ª—è —É–¥–æ–±—Å—Ç–≤–∞, –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –º–æ–∂–Ω–æ –æ—Ñ–æ—Ä–º–∏—Ç—å –≤ –≤–∏–¥–µ –º–∏–∫—Å–∏–Ω–∞:
                <pre className={styles.cssExample}>{cssMixin}</pre>
            </Typography.Text>
            <Row>
                <Checkbox label="–ß–µ–∫–±–æ–∫—Å –Ω–∞ —Ç–µ–º–Ω–æ–º —Ñ–æ–Ω–µ" checked />
            </Row>
            <Row>
                <Radio label="–†–∞–¥–∏–æ-–∫–Ω–æ–ø–∫–∞ –Ω–∞ —Ç–µ–º–Ω–æ–º —Ñ–æ–Ω–µ" checked />
            </Row>
            <div className={cn(styles.light, styles.container)}>
                <Typography.Title view="small">Light block</Typography.Title>
                <Row>
                    <Checkbox label="–ß–µ–∫–±–æ–∫—Å –Ω–∞ —Å–≤–µ—Ç–ª–æ–º —Ñ–æ–Ω–µ" checked />
                </Row>
                <Row>
                    <Radio label="–†–∞–¥–∏–æ-–∫–Ω–æ–ø–∫–∞ –Ω–∞ —Å–≤–µ—Ç–ª–æ–º —Ñ–æ–Ω–µ" checked />
                </Row>
            </div>
            <div className={cn(styles.redEye, styles.container)}>
                <Typography.Title view="small">Custom block</Typography.Title>
                <Row>
                    <Checkbox label="–ß–µ–∫–±–æ–∫—Å" />
                </Row>
                <Row>
                    <Radio label="–†–∞–¥–∏–æ-–∫–Ω–æ–ø–∫–∞" />
                </Row>
                <Row>
                    <Checkbox label="–ß–µ–∫–±–æ–∫—Å" checked />
                </Row>
                <Row>
                    <Radio label="–†–∞–¥–∏–æ-–∫–Ω–æ–ø–∫–∞" checked />
                </Row>
            </div>
        </div>
    </div>
</Story>


*–ï—Å–ª–∏ –æ—Å—Ç–∞–ª–∏—Å—å –∫–∞–∫–∏–µ-–ª–∏–±–æ –≤–æ–ø—Ä–æ—Å—ã –∏–ª–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –Ω–µ –∫–∞–∂–µ—Ç—Å—è –ø–æ–Ω—è—Ç–Ω–æ–π - –ø–æ–∂–∞–ª—É–π—Å—Ç–∞, —Å–≤—è–∂–∏—Ç–µ—Å—å —Å –º–µ–π–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏ –ø—Ä–æ–µ–∫—Ç–∞ –∏–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ issue.*
