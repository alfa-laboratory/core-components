import { Meta, Story, Preview, Props } from '@storybook/addon-docs/blocks';
import { action } from '@storybook/addon-actions';
import { text, select, boolean } from '@storybook/addon-knobs';
import { Container, Row, Col } from 'storybook/blocks/grid';
import { ComponentHeader } from 'storybook/blocks/component-header';
import IconM from '@alfalab/icons-glyph/StarMIcon';
import IconS from '@alfalab/icons-glyph/FlashCircleSIcon';

import { Button } from './Component';
import { name, version } from '../package.json';

export const VIEWS = ['primary', 'secondary', 'outlined', 'filled', 'transparent', 'link', 'ghost'];
export const SIZES = ['xs', 's', 'm', 'l', 'xl'];


<Meta
    title='Компоненты'
    component={Button}
    parameters={{ 'theme-switcher': { themes: ['click', 'corp', 'corp-inverted', 'site', 'site-inverted', 'mobile'] } }}
/>


<!-- Canvas -->

<Story name='Button'>
    <Button
        view={select('view', VIEWS, 'primary')}
        size={select('size', SIZES, 'm')}
        href={text('href', '')}
        loading={boolean('loading')}
        disabled={boolean('disabled', false)}
        block={boolean('block', false)}
        nowrap={boolean('nowrap', false)}
        onClick={action('click')}
        leftAddons={boolean('leftAddons', false) && <IconM />}
        rightAddons={boolean('rightAddons', false) && <IconM />}
    >
        {text('label', 'Оплатить')}
    </Button>
</Story>


<!-- Docs -->

<ComponentHeader
    name='Button'
    version={version}
    stage={3}
    design='https://www.figma.com/file/hqSP3L6qu8UcL3sf18Su1M/Web-Components?node-id=1%3A2'
/>

```tsx
import { Button } from '@alfalab/core-components-button';
```

Кнопка используется как триггер для выполнения определённого действия. Кнопка однозначно сообщает пользователю, что произойдёт после нажатия на неё.

☝️ В зависимости от используемой темы кнопка `secondary` может соответствовать `filled` (по умолчанию) или `outlined`.

<Preview>
    <Container>
        <Row align='middle'>
            <Col>
                <Button view='primary'>Primary</Button>
            </Col>
            <Col>
                <Button view='secondary'>Secondary</Button>
            </Col>
            <Col>
                <Button view='outlined'>Outlined</Button>
            </Col>
            <Col>
                <Button view='filled'>Filled</Button>
            </Col>
            <Col>
                <Button view='transparent'>Transparent</Button>
            </Col>
            <Col>
                <Button view='link'>Link</Button>
            </Col>
            <Col>
                <Button view='ghost'>Ghost</Button>
            </Col>
        </Row>
    </Container>
</Preview>



<Props of={Button} />


## Виды кнопок

В библиотеке доступно несколько видов кнопок (view).

- <b>Primary</b>. Обозначает ключевое действие. На экране может быть только одна главная кнопка.

<Preview>
    <Container>
        <Row>
            {SIZES.map(size => (
                <Col key={size}>
                    <Button size={size} view="primary">
                        Кнопка
                    </Button>
                </Col>
            ))}
        </Row>
    </Container>
</Preview>

- <b>Secondary</b>. Второстепенная кнопка. Может использоваться для любых действий.

<Preview>
    <Container>
        <Row>
            {SIZES.map(size => (
                <Col key={size}>
                    <Button size={size} view="secondary">
                        Кнопка
                    </Button>
                </Col>
            ))}
        </Row>
    </Container>
</Preview>

- <b>Outlined</b>. Дополнительная кнопка.

<Preview>
    <Container>
        <Row>
            {SIZES.map(size => (
                <Col key={size}>
                    <Button size={size} view="outlined">
                        Кнопка
                    </Button>
                </Col>
            ))}
        </Row>
    </Container>
</Preview>

- <b>Filled</b>. Дополнительная кнопка.

<Preview>
    <Container>
        <Row>
            {SIZES.map(size => (
                <Col key={size}>
                    <Button size={size} view="filled">
                        Кнопка
                    </Button>
                </Col>
            ))}
        </Row>
    </Container>
</Preview>

- <b>Transparent</b>. Кнопка с прозрачностью.

<Preview>
    <Container>
        <Row>
            {SIZES.map(size => (
                <Col key={size}>
                    <Button size={size} view="transparent">
                        Кнопка
                    </Button>
                </Col>
            ))}
        </Row>
    </Container>
</Preview>

- <b>Link</b>. Прозрачная кнопка-ссылка. Для получения ссылки, нужно установить пропс `href`.

<Preview>
    <Container>
        <Row>
            {SIZES.map(size => (
                <Col key={size}>
                    <Button size={size} view="link">
                        Кнопка
                    </Button>
                </Col>
            ))}
        </Row>
    </Container>
</Preview>

- <b>Ghost</b>. Прозрачная кнопка без отступов.

<Preview>
    <Container>
        <Row>
            {SIZES.map(size => (
                <Col key={size}>
                    <Button size={size} view="ghost">
                        Кнопка
                    </Button>
                </Col>
            ))}
        </Row>
    </Container>
</Preview>

## Ссылка

Любую кнопку можно превратить в ссылку, передав компоненту пропс `href`.

<Preview>
    <Container>
        <Row align="middle">
            <Col>
                <Button href="https://alfabank.ru" target="_blank" >
                    Ссылка
                </Button>
            </Col>
            <Col>
                <Button view="outlined" href="https://alfabank.ru" target="_blank" >
                    Ссылка
                </Button>
            </Col>
        </Row>
    </Container>
</Preview>

## Ширина кнопки

С помощью свойства `block` можно заставить кнопку занимать всю ширину контейнера.

<Preview>
    <Button block={true} size="s" >
        Кнопка
    </Button>
</Preview>

## Слоты для кастомизации

С помощью слотов `leftAddons` и `rightAddons` можно кастомизировать кнопку. Например, добавить иконку.

Переданный контент будет отрисован слева или справа от текста кнопки. Если текста нет — будет отрисована квадратная кнопка.

<Preview>
    <Container>
        <Row>
            <Col>
                <Button leftAddons={<IconM/>} rightAddons={<IconM/>}>
                    Кнопка
                </Button>
            </Col>
            <Col>
                <Button rightAddons={<IconM/>} view="outlined"/>
            </Col>
            <Col>
                <Button size="xs" leftAddons={<IconS/>}>
                    Кнопка
                </Button>
            </Col>
            <Col>
                <Button size="xs" rightAddons={<IconS/>} view="outlined"/>
            </Col>
        </Row>
    </Container>
</Preview>

## Состояние загрузки

С помощью свойства `loading` можно отобразить состояние загрузки.

Минимальное время отображения лоадера - 500мс, чтобы при быстрых ответах от сервера кнопка не «моргала».

<Preview>
    {React.createElement(() => {
        const [loading, setLoading] = React.useState({
            primary: false,
            secondary: false
        });
        const handleClick = (buttonName, timeout) => {
            setLoading({...loading, [buttonName]: true});
            setTimeout(() => {
                setLoading({...loading, [buttonName]: false});
            }, timeout)
        }
        return (
            <Container>
                <Row align="middle">
                    <Col>
                        <Button
                            view="primary"
                            loading={loading.primary}
                            onClick={() => handleClick('primary', 30)}
                        >
                            Отправить быстрый запрос (30мс)
                        </Button>
                    </Col>
                    <Col>
                        <Button
                            view="secondary"
                            loading={loading.secondary}
                            onClick={() => handleClick('secondary', 1500)}
                        >
                            Отправить долгий запрос (1500мс)
                        </Button>
                    </Col>
                </Row>
            </Container>
        );
    })}
</Preview>

## Перенос текста

С помощью свойства `nowrap` можно запретить перенос строки в кнопке.
<Preview>
    <div style={{ width: '240px' }}>
        <Row align="middle">
            <Col>
                <Button view="secondary" nowrap={true}>
                    Кнопка без переноса текста
                </Button>
            </Col>
            <Col>
                <Button view="ghost">
                    Кнопка с переносом текста
                </Button>
            </Col>
        </Row>
    </div>
</Preview>

## Темы

`site` и `site-inverted`

<div style={{border: '1px solid #e5e5e5', borderRadius: '4px', overflow: 'hidden'}}>
<div data-theme='site' style={{padding: '24px', backgroundColor: '#fff'}}>
    <Container>
        <Row align='middle'>
            <Col>
                <Button view='primary'>Primary</Button>
            </Col>
            <Col>
                <Button view='secondary'>Secondary</Button>
            </Col>
            <Col>
                <Button view='outlined'>Outlined</Button>
            </Col>
        </Row>
    </Container>
</div>
<div data-theme='site-inverted' style={{padding: '24px', backgroundColor: '#0b1f35'}}>
    <Container>
        <Row align='middle'>
            <Col>
                <Button view='primary'>Primary</Button>
            </Col>
            <Col>
                <Button view='secondary'>Secondary</Button>
            </Col>
            <Col>
                <Button view='outlined'>Outlined</Button>
            </Col>
        </Row>
    </Container>
</div>
</div>
