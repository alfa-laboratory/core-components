import { Meta, Story, Props } from '@storybook/addon-docs';
import { boolean } from '@storybook/addon-knobs';
import { ComponentHeader, Tabs, CssVars } from 'storybook/blocks';
import { Button } from '@alfalab/core-components-button';

import { Gallery } from '..';
import { name, version } from '../../package.json';
import Description from './description.mdx';
import Changelog from '../../CHANGELOG.md';
import styles from '!!raw-loader!../vars.css';

<Meta
    title='Компоненты/Gallery'
    component={Gallery}
/>

<!-- Canvas -->

<Story name='Gallery'>
    {React.createElement(() => {
        const [openMultiple, setOpenMultiple] = React.useState(false);
        const [open, setOpen] = React.useState(false);
        return (
            <div style={{ width: '100%', height: 'calc(100vh - 50px)'}}>
                <div style={{margin: '24px'}}>
                    <Button view="primary" onClick={() => { setOpenMultiple(true) }} id="open-gallery-button">
                        Открыть галерею
                    </Button>
                </div>
                <div style={{margin: '24px'}}>
                    <Button view="primary" onClick={() => { setOpen(true) }} id="open-single-gallery-button">
                        Открыть галерею с одним изображением
                    </Button>
                </div>
                <Gallery
                    open={openMultiple}
                    onClose={() => {
                        setOpenMultiple(false);
                    }}
                    images={[
                        {
                            name: 'Горизонтальное изображение.jpg',
                            src: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwMCIgaGVpZ2h0PSI1MDAiIHZpZXdCb3g9IjAgMCAxMDAwIDUwMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjEwMDAiIGhlaWdodD0iNTAwIiBmaWxsPSIjNDU0Nzc4Ii8+Cjwvc3ZnPgo='
                        },
                        {
                            name: 'Вертикальное изображение.jpg',
                            src: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTAwIiBoZWlnaHQ9IjEwMDAiIHZpZXdCb3g9IjAgMCA1MDAgMTAwMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjUwMCIgaGVpZ2h0PSIxMDAwIiBmaWxsPSIjNDU0Nzc4Ii8+Cjwvc3ZnPgo='
                        },
                        {
                            name: 'Маленькое изображение.jpg',
                            src: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTUwIiBoZWlnaHQ9IjE1MCIgdmlld0JveD0iMCAwIDE1MCAxNTAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxNTAiIGhlaWdodD0iMTUwIiBmaWxsPSIjNDU0Nzc4Ii8+Cjwvc3ZnPgo='
                        },
                        {
                            name: 'Битое изображение.jpg',
                            src: 'data:image/svg+xml;base64,'
                        },
                    ]}
                    loop={boolean('loop', true)}
                />
                <Gallery
                    open={open}
                    onClose={() => {
                        setOpen(false);
                    }}
                    images={[
                        {
                            name: 'Горизонтальное изображение.jpg',
                            src: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwMCIgaGVpZ2h0PSI1MDAiIHZpZXdCb3g9IjAgMCAxMDAwIDUwMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjEwMDAiIGhlaWdodD0iNTAwIiBmaWxsPSIjNDU0Nzc4Ii8+Cjwvc3ZnPgo='
                        },
                    ]}
                    loop={boolean('loop', true)}
                />
            </div>
        )
    })}
</Story>

<!-- Docs -->

<ComponentHeader
    name='Gallery'
    version={version}
    stage={2}
/>

```tsx
import { Gallery } from '@alfalab/core-components/gallery';
```

<Tabs
    description={<Description />}
    changelog={<Changelog />}
    props={<Props of={Gallery} />}
    cssVars={<CssVars css={styles} />}
/>
