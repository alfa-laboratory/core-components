Набор компонентов для построения таблиц.

Набор представляет из себя стилизованные компоненты, которые открыты к расширению и содержат лишь минимальный набор параметров.

Компоненты не содержат почти никакой логики и могу использоваться совместно с другими библиотеками для таблиц, например с [react-table](https://react-table.tanstack.com/)

## Пример простой таблицы

```tsx live
const data = [
    {
        id: 28,
        date: '07.12.2021',
        title: 'ARG BANK OF CHINA',
        number: 931,
    },
    {
        id: 12,
        date: '06.12.2021',
        title: 'ООО СОВМЕСТНОЕ ПРЕДПРИЯТИЕ "ИНТЕГРА"',
        number: 78,
    },
    {
        id: 5,
        date: '06.12.2021',
        title: 'Общество с ограниченной ответственностью "Умное пространство"',
        number: 12,
    },
];

render(() => {
    return (
        <Table>
            <Table.THead>
                <Table.THeadCell title='Дата'>Дата</Table.THeadCell>

                <Table.THeadCell title='Контрагент'>Контрагент</Table.THeadCell>

                <Table.THeadCell title='Номер'>Номер</Table.THeadCell>
            </Table.THead>
            <Table.TBody>
                {data.map(row => (
                    <Table.TRow key={row.id}>
                        <Table.TCell>
                            <Typography.Text view='primary-small' tag='div'>
                                {row.date}
                            </Typography.Text>
                        </Table.TCell>

                        <Table.TCell>
                            <Typography.Text view='primary-small' tag='div'>
                                {row.title}
                            </Typography.Text>
                        </Table.TCell>

                        <Table.TCell>
                            <Typography.Text view='primary-small'>{row.number}</Typography.Text>
                        </Table.TCell>
                    </Table.TRow>
                ))}
            </Table.TBody>
        </Table>
    );
});
```

## Обертка

`Wrapper` позволяет обернуть таблицу в контейнер, который задает нужные стили

```tsx live
const data = [
    {
        id: 28,
        date: '07.12.2021',
        title: 'ARG BANK OF CHINA',
        number: 931,
    },
    {
        id: 12,
        date: '06.12.2021',
        title: 'ООО СОВМЕСТНОЕ ПРЕДПРИЯТИЕ "ИНТЕГРА"',
        number: 78,
    },
    {
        id: 5,
        date: '06.12.2021',
        title: 'Общество с ограниченной ответственностью "Умное пространство"',
        number: 12,
    },
];

render(() => {
    return (
        <Table.Wrapper>
            <Table>
                <Table.THead>
                    <Table.THeadCell title='Дата'>Дата</Table.THeadCell>

                    <Table.THeadCell title='Контрагент'>Контрагент</Table.THeadCell>

                    <Table.THeadCell title='Номер'>Номер</Table.THeadCell>
                </Table.THead>
                <Table.TBody>
                    {data.map(row => (
                        <Table.TRow key={row.id}>
                            <Table.TCell>
                                <Typography.Text view='primary-small' tag='div'>
                                    {row.date}
                                </Typography.Text>
                            </Table.TCell>

                            <Table.TCell>
                                <Typography.Text view='primary-small' tag='div'>
                                    {row.title}
                                </Typography.Text>
                            </Table.TCell>

                            <Table.TCell>
                                <Typography.Text view='primary-small'>{row.number}</Typography.Text>
                            </Table.TCell>
                        </Table.TRow>
                    ))}
                </Table.TBody>
            </Table>
        </Table.Wrapper>
    );
});
```

## Настройка колонок

Задавая настройки для `THeadCell` можно контролировать отображение колонки целиком:

-   `hidden` — позволяет скрыть колонку
-   `width` — задает ширину колонки
-   `textAlign` — задает выравнивание контента

```tsx live
const data = [
    {
        id: 28,
        date: '07.12.2021',
        title: 'ARG BANK OF CHINA',
        number: 931,
    },
    {
        id: 12,
        date: '06.12.2021',
        title: 'ООО СОВМЕСТНОЕ ПРЕДПРИЯТИЕ "ИНТЕГРА"',
        number: 78,
    },
    {
        id: 5,
        date: '06.12.2021',
        title: 'Общество с ограниченной ответственностью "Умное пространство"',
        number: 12,
    },
];

render(() => {
    return (
        <Table>
            <Table.THead>
                <Table.THeadCell title='Номер' hidden={true}>
                    Id
                </Table.THeadCell>

                <Table.THeadCell title='Дата' width='240'>
                    Дата 240px
                </Table.THeadCell>

                <Table.THeadCell title='Контрагент' textAlign='center'>
                    Контрагент
                </Table.THeadCell>

                <Table.THeadCell title='Номер' textAlign='right' width='120px'>
                    Номер
                </Table.THeadCell>
            </Table.THead>
            <Table.TBody>
                {data.map(row => (
                    <Table.TRow key={row.id}>
                        <Table.TCell>{row.id}</Table.TCell>

                        <Table.TCell>
                            <Typography.Text view='primary-small' tag='div'>
                                {row.date}
                            </Typography.Text>
                        </Table.TCell>

                        <Table.TCell>
                            <Typography.Text view='primary-small' tag='div'>
                                {row.title}
                            </Typography.Text>
                        </Table.TCell>

                        <Table.TCell>
                            <Typography.Text view='primary-small'>{row.number}</Typography.Text>
                        </Table.TCell>
                    </Table.TRow>
                ))}
            </Table.TBody>
        </Table>
    );
});
```

## Сортировка

Реализация сортировки лежит на разработчике, пакет предоставляет только компоненты для сборки UI.

`TSortableHeadCell` позволяет отобразить индикатор сортировки и вызвать обработчик сортировки при клике.

-   Если `isSortedDesc=true` — показывается индиктор сортировки по убыванию (desc)
-   Если `isSortedDesc=false` — показывается индиктор по возрастанию (asc)
-   Если `isSortedDesc=undefined` — показывается индиктор, что данные не отсортированы (unset)

_Если нужно показать, что данные отсортированы заранее, то можно использовать `defaultIsSortedDesc`, тогда иконка индикатора будет серой, а не синей._

```tsx live
const data = [
    {
        id: 5,
        date: '06.12.2021',
        title: 'Общество с ограниченной ответственностью "Умное пространство"',
        number: 12,
    },
    {
        id: 12,
        date: '06.12.2021',
        title: 'ООО СОВМЕСТНОЕ ПРЕДПРИЯТИЕ "ИНТЕГРА"',
        number: 78,
    },
    {
        id: 28,
        date: '07.12.2021',
        title: 'ARG BANK OF CHINA',
        number: 931,
    },
];

render(() => {
    const [isSortedDesc, setIsSortedDesc] = React.useState(undefined);

    const defaultIsSortedDesc = false;

    const handleSort = (...args) => {
        if (isSortedDesc !== undefined) {
            setIsSortedDesc(!isSortedDesc ? undefined : defaultIsSortedDesc);
        } else {
            setIsSortedDesc(!defaultIsSortedDesc);
        }
    };

    const sortedData = React.useMemo(() => {
        if (isSortedDesc === undefined) return data;

        return [...data].sort((a, b) => (isSortedDesc ? b.number - a.number : a.number - b.number));
    }, [data, isSortedDesc]);

    return (
        <Table>
            <Table.THead>
                <Table.THeadCell title='Дата'>Дата</Table.THeadCell>

                <Table.THeadCell title='Контрагент'>Контрагент</Table.THeadCell>

                <Table.TSortableHeadCell
                    title='Номер'
                    defaultIsSortedDesc={defaultIsSortedDesc}
                    isSortedDesc={isSortedDesc}
                    onSort={handleSort}
                >
                    Номер
                </Table.TSortableHeadCell>
            </Table.THead>
            <Table.TBody>
                {sortedData.map(row => (
                    <Table.TRow key={row.id}>
                        <Table.TCell>
                            <Typography.Text view='primary-small' tag='div'>
                                {row.date}
                            </Typography.Text>
                        </Table.TCell>

                        <Table.TCell>
                            <Typography.Text view='primary-small' tag='div'>
                                {row.title}
                            </Typography.Text>
                        </Table.TCell>

                        <Table.TCell>
                            <Typography.Text view='primary-small'>{row.number}</Typography.Text>
                        </Table.TCell>
                    </Table.TRow>
                ))}
            </Table.TBody>
        </Table>
    );
});
```

## Пагинация

Для реализации пагинации следует использовать компонент `Pagination`.

Как и в случае с сортировкой, контроль над данными лежит на разработчике.

```tsx live
const data = [
    {
        id: 28,
        date: '07.12.2021',
        title: 'ARG BANK OF CHINA',
        number: 931,
    },
    {
        id: 12,
        date: '06.12.2021',
        title: 'ООО СОВМЕСТНОЕ ПРЕДПРИЯТИЕ "ИНТЕГРА"',
        number: 78,
    },
    {
        id: 5,
        date: '06.12.2021',
        title: 'Общество с ограниченной ответственностью "Умное пространство"',
        number: 12,
    },
    {
        id: 4,
        date: '06.12.2021',
        title: 'ООО "Берест"',
        number: 843,
    },
    {
        id: 1,
        date: '06.12.2021',
        title:
            'УФК по Свердловской области (Государственное учреждение - Свердловское региональное отделение Фонда социального страхования Российской Федерации)',
        number: 159,
    },
    {
        id: 27,
        date: '21.10.2021',
        title: 'MasterBrok',
        number: 1060,
    },
    {
        id: 26,
        date: '20.10.2021',
        title: 'MR ANTON TAGUNOV',
        number: 1898,
    },
];

render(() => {
    const [perPage, setPerPage] = React.useState(5);
    const [page, setPage] = React.useState(0);

    const handlePerPageChange = value => {
        setPage(0);
        setPerPage(value);
    };

    const handlePageChange = pageIndex => setPage(pageIndex);

    const pagesCount = Math.ceil(data.length / perPage);

    const currentPageData = React.useMemo(() => {
        return data.slice(page * perPage).slice(0, perPage);
    }, [data, page, perPage]);

    return (
        <Table.Wrapper style={{ margin: '24px 0 40px' }}>
            <Table>
                <Table.THead>
                    <Table.THeadCell title='Дата' width='120px'>
                        Дата
                    </Table.THeadCell>

                    <Table.THeadCell title='Контрагент'>Контрагент</Table.THeadCell>

                    <Table.THeadCell title='Номер' width='100px'>
                        Номер
                    </Table.THeadCell>
                </Table.THead>
                <Table.TBody>
                    {currentPageData.map(row => (
                        <Table.TRow key={row.id}>
                            <Table.TCell>
                                <Typography.Text view='primary-small' tag='div'>
                                    {row.date}
                                </Typography.Text>
                            </Table.TCell>

                            <Table.TCell>
                                <Typography.Text view='primary-small' tag='div'>
                                    {row.title}
                                </Typography.Text>
                            </Table.TCell>

                            <Table.TCell>
                                <Typography.Text view='primary-small'>{row.number}</Typography.Text>
                            </Table.TCell>
                        </Table.TRow>
                    ))}
                </Table.TBody>
            </Table>

            <Table.Pagination
                perPage={perPage}
                currentPageIndex={page}
                possiblePerPage={[5, 10]}
                pagesCount={pagesCount}
                onPageChange={handlePageChange}
                onPerPageChange={handlePerPageChange}
            />
        </Table.Wrapper>
    );
});
```

## Раскрывающаяся строка

`TExpandableRow` позволяет реализовывать раскрывающиеся строки.

Скрытый контент отрисовывается с помощью рендер-пропса `renderContent`, в который передается состояние `expanded`.

Это позволяет более гибко управлять рендером и, например, использовать `Collapse` для плавного раскрытия.

```tsx live
const data = [
    {
        id: 5,
        date: '06.12.2021',
        title: 'Общество с ограниченной ответственностью "Умное пространство"',
        number: 12,
    },
    {
        id: 12,
        date: '06.12.2021',
        title: 'ООО СОВМЕСТНОЕ ПРЕДПРИЯТИЕ "ИНТЕГРА"',
        number: 78,
    },
    {
        id: 28,
        date: '07.12.2021',
        title: 'ARG BANK OF CHINA',
        number: 931,
    },
];

render(() => {
    return (
        <Table>
            <Table.THead>
                <Table.THeadCell title='Дата'>Дата</Table.THeadCell>

                <Table.THeadCell title='Контрагент'>Контрагент</Table.THeadCell>

                <Table.THeadCell title='Номер'>Номер</Table.THeadCell>
            </Table.THead>
            <Table.TBody>
                {data.map(row => (
                    <Table.TExpandableRow
                        key={row.id}
                        defaultExpanded={row.id === 5}
                        renderContent={expanded => (
                            <>
                                <Table.TCell colSpan={1} />
                                <Table.TCell colSpan={2}>
                                    <Collapse expanded={expanded}>
                                        <Typography.Text
                                            view='primary-small'
                                            color='secondary'
                                            tag='div'
                                            style={{ padding: '4px 0 16px' }}
                                        >
                                            Платёж №{row.number} будет отправлен в банк после
                                            подписания
                                        </Typography.Text>
                                    </Collapse>
                                </Table.TCell>
                            </>
                        )}
                    >
                        <Table.TCell>
                            <Typography.Text view='primary-small' tag='div'>
                                {row.date}
                            </Typography.Text>
                        </Table.TCell>

                        <Table.TCell>
                            <Typography.Text view='primary-small' tag='div'>
                                {row.title}
                            </Typography.Text>
                        </Table.TCell>

                        <Table.TCell>
                            <Typography.Text view='primary-small'>{row.number}</Typography.Text>
                        </Table.TCell>
                    </Table.TExpandableRow>
                ))}
            </Table.TBody>
        </Table>
    );
});
```

### Внешний контроль над раскрытием строк

`TExpandableRow` может использоваться как в uncontrolled, так и controlled режиме, когда нужно самостоятельно управлять раскрытием.

```tsx live
const data = [
    {
        id: 5,
        date: '06.12.2021',
        title: 'Общество с ограниченной ответственностью "Умное пространство"',
        number: 12,
    },
    {
        id: 12,
        date: '06.12.2021',
        title: 'ООО СОВМЕСТНОЕ ПРЕДПРИЯТИЕ "ИНТЕГРА"',
        number: 78,
    },
    {
        id: 28,
        date: '07.12.2021',
        title: 'ARG BANK OF CHINA',
        number: 931,
    },
];

render(() => {
    const [expandedRow, setExpandedRow] = React.useState();

    const handleExpand = (rowId, expanded) => {
        if (expanded) {
            setExpandedRow(undefined);
        } else {
            setExpandedRow(rowId);
        }
    };

    return (
        <Table>
            <Table.THead>
                <Table.THeadCell title='Дата'>Дата</Table.THeadCell>

                <Table.THeadCell title='Контрагент'>Контрагент</Table.THeadCell>

                <Table.THeadCell title='Номер'>Номер</Table.THeadCell>
            </Table.THead>
            <Table.TBody>
                {data.map(row => (
                    <Table.TExpandableRow
                        key={row.id}
                        expanded={expandedRow === row.id}
                        onToggle={expanded => handleExpand(row.id, expanded)}
                        renderContent={expanded => (
                            <>
                                <Table.TCell colSpan={1} />
                                <Table.TCell colSpan={2}>
                                    <Collapse expanded={expanded}>
                                        <Typography.Text
                                            view='primary-small'
                                            color='secondary'
                                            tag='div'
                                            style={{ padding: '4px 0 16px' }}
                                        >
                                            Платёж №{row.number} будет отправлен в банк после
                                            подписания
                                        </Typography.Text>
                                    </Collapse>
                                </Table.TCell>
                            </>
                        )}
                    >
                        <Table.TCell>
                            <Typography.Text view='primary-small' tag='div'>
                                {row.date}
                            </Typography.Text>
                        </Table.TCell>

                        <Table.TCell>
                            <Typography.Text view='primary-small' tag='div'>
                                {row.title}
                            </Typography.Text>
                        </Table.TCell>

                        <Table.TCell>
                            <Typography.Text view='primary-small'>{row.number}</Typography.Text>
                        </Table.TCell>
                    </Table.TExpandableRow>
                ))}
            </Table.TBody>
        </Table>
    );
});
```

## Выбор строк

```tsx live
const data = [
    {
        id: 28,
        date: '07.12.2021',
        title: 'ARG BANK OF CHINA',
        number: 931,
    },
    {
        id: 12,
        date: '06.12.2021',
        title: 'ООО СОВМЕСТНОЕ ПРЕДПРИЯТИЕ "ИНТЕГРА"',
        number: 78,
    },
    {
        id: 5,
        date: '06.12.2021',
        title: 'Общество с ограниченной ответственностью "Умное пространство"',
        number: 12,
    },
];

render(() => {
    const [selectedRows, setSelectedRows] = React.useState(new Set());

    const handleRowSelect = rowId => {
        const nextSelected = new Set(selectedRows);

        if (rowId === 'all') {
            setSelectedRows(
                new Set(selectedRows.size === data.length ? [] : data.map(row => row.id)),
            );

            return;
        }

        if (nextSelected.has(rowId)) {
            nextSelected.delete(rowId);
        } else {
            nextSelected.add(rowId);
        }

        setSelectedRows(nextSelected);
    };

    return (
        <Table>
            <Table.THead>
                <Table.THeadCell width='48px'>
                    <Tooltip
                        view='hint'
                        position='top'
                        content={
                            <React.Fragment>
                                Выбрать все
                                <br />
                                на странице
                            </React.Fragment>
                        }
                    >
                        <Checkbox
                            size='m'
                            onClick={() => handleRowSelect('all')}
                            checked={data.length > 0 && data.every(row => selectedRows.has(row.id))}
                            indeterminate={
                                data.length > 0 && data.some(row => selectedRows.has(row.id))
                            }
                        />
                    </Tooltip>
                </Table.THeadCell>

                <Table.THeadCell title='Дата'>Дата</Table.THeadCell>

                <Table.THeadCell title='Контрагент'>Контрагент</Table.THeadCell>

                <Table.THeadCell title='Номер'>Номер</Table.THeadCell>
            </Table.THead>
            <Table.TBody>
                {data.map(row => (
                    <Table.TExpandableRow
                        key={row.id}
                        selected={selectedRows.has(row.id)}
                        renderContent={expanded => (
                            <>
                                <Table.TCell colSpan={1} />
                                <Table.TCell colSpan={2}>
                                    <Collapse expanded={expanded}>
                                        <Typography.Text
                                            view='primary-small'
                                            color='secondary'
                                            tag='div'
                                            style={{ padding: '4px 0 16px' }}
                                        >
                                            Платёж №{row.number} будет отправлен в банк после
                                            подписания
                                        </Typography.Text>
                                    </Collapse>
                                </Table.TCell>
                            </>
                        )}
                    >
                        <Table.TCell>
                            <Checkbox
                                size='m'
                                onClick={() => handleRowSelect(row.id)}
                                checked={selectedRows.has(row.id)}
                            />
                        </Table.TCell>

                        <Table.TCell>
                            <Typography.Text view='primary-small' tag='div'>
                                {row.date}
                            </Typography.Text>
                        </Table.TCell>

                        <Table.TCell>
                            <Typography.Text view='primary-small' tag='div'>
                                {row.title}
                            </Typography.Text>
                        </Table.TCell>

                        <Table.TCell>
                            <Typography.Text view='primary-small'>{row.number}</Typography.Text>
                        </Table.TCell>
                    </Table.TExpandableRow>
                ))}
            </Table.TBody>
        </Table>
    );
});
```
